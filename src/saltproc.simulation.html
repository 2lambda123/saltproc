

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>saltproc.simulation module &mdash; Saltproc  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Saltproc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">SaltProc API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Saltproc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>saltproc.simulation module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/src/saltproc.simulation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-saltproc.simulation">
<span id="saltproc-simulation-module"></span><h1>saltproc.simulation module<a class="headerlink" href="#module-saltproc.simulation" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="saltproc.simulation.Simulation">
<em class="property">class </em><code class="sig-prename descclassname">saltproc.simulation.</code><code class="sig-name descname">Simulation</code><span class="sig-paren">(</span><em class="sig-param">sim_name='default'</em>, <em class="sig-param">sim_depcode='SERPENT'</em>, <em class="sig-param">core_number=1</em>, <em class="sig-param">node_number=1</em>, <em class="sig-param">h5_file='db_saltproc.h5'</em>, <em class="sig-param">compression=Filters(complevel=9</em>, <em class="sig-param">complib='blosc'</em>, <em class="sig-param">shuffle=True</em>, <em class="sig-param">bitshuffle=False</em>, <em class="sig-param">fletcher32=True</em>, <em class="sig-param">least_significant_digit=None)</em>, <em class="sig-param">iter_matfile='./saltproc_mat'</em><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class sets up parameters for simulation, runs Serpent, parses output,
creates input.</p>
<dl class="method">
<dt id="saltproc.simulation.Simulation.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">sim_name='default'</em>, <em class="sig-param">sim_depcode='SERPENT'</em>, <em class="sig-param">core_number=1</em>, <em class="sig-param">node_number=1</em>, <em class="sig-param">h5_file='db_saltproc.h5'</em>, <em class="sig-param">compression=Filters(complevel=9</em>, <em class="sig-param">complib='blosc'</em>, <em class="sig-param">shuffle=True</em>, <em class="sig-param">bitshuffle=False</em>, <em class="sig-param">fletcher32=True</em>, <em class="sig-param">least_significant_digit=None)</em>, <em class="sig-param">iter_matfile='./saltproc_mat'</em><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the Simulation object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim_name</strong> (<em>str</em>) – Name of simulation may contain number of reference case, paper name
or other specific information to identify simulation.</p></li>
<li><p><strong>sim_depcode</strong> (<em>obj</em>) – Depcode object initiated using Depcode class.</p></li>
<li><p><strong>cores</strong> (<em>int</em>) – Number of cores to use for Serpent run (<cite>-omp</cite> flag in Serpent).</p></li>
<li><p><strong>nodes</strong> (<em>int</em>) – Number of nodes to use for Serpent run (<cite>-mpi</cite> flag in Serpent).</p></li>
<li><p><strong>h5_file</strong> (<em>str</em>) – Name of HDF5 database.</p></li>
<li><p><strong>compression</strong> (<em>Pytables filter object</em>) – HDF5 database compression parameters.</p></li>
<li><p><strong>iter_matfile</strong> (<em>str</em>) – Name of file containing burnable materials composition used in
Serpent runs and update after each depletion step.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="saltproc.simulation.Simulation.read_k_eds_delta">
<code class="sig-name descname">read_k_eds_delta</code><span class="sig-paren">(</span><em class="sig-param">current_timestep</em>, <em class="sig-param">restart</em><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation.read_k_eds_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads from database delta between previous and current <cite>keff</cite> at the
end of depletion step and returns <cite>True</cite> if predicted <cite>keff</cite> at the
next depletion step drops below 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current_timestep</strong> (<em>int</em>) – number of current depletion time step.</p></li>
<li><p><strong>restart</strong> (<em>bool</em>) – was this simulation restarted?</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>is the reactor will become subcritical at the next step?</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="saltproc.simulation.Simulation.runsim_no_reproc">
<code class="sig-name descname">runsim_no_reproc</code><span class="sig-paren">(</span><em class="sig-param">reactor</em>, <em class="sig-param">nsteps</em><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation.runsim_no_reproc" title="Permalink to this definition">¶</a></dt>
<dd><p>Run simulation sequence for integral test. No reprocessing involved,
just re-running Serpent for comparision with model output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reactor</strong> (<a class="reference internal" href="saltproc.reactor.html#saltproc.reactor.Reactor" title="saltproc.reactor.Reactor"><em>Reactor</em></a>) – Contains information about power load curve and cumulative
depletion time for the integration test.</p></li>
<li><p><strong>nsteps</strong> (<em>int</em>) – Number of depletion time steps in integration test run.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="saltproc.simulation.Simulation.store_after_repr">
<code class="sig-name descname">store_after_repr</code><span class="sig-paren">(</span><em class="sig-param">after_mats</em>, <em class="sig-param">waste_dict</em>, <em class="sig-param">step</em><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation.store_after_repr" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds to HDF5 database waste streams data for each process after
reprocessing was performed (grams per depletion step).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>after_mats</strong> (<cite>Materialflow</cite>) – Burnable material stream object after performing reprocessing.</p></li>
<li><p><strong>waste_dict</strong> (<em>dict</em>) – Dictionary that maps <cite>processes</cite> to waste <cite>Materialflow</cite> objects.
The key is Processes name (<cite>str</cite>). The value is <cite>Materialflow</cite>
object containing waste streams data.</p></li>
<li><p><strong>step</strong> (<em>int</em>) – Current depletion step.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="saltproc.simulation.Simulation.store_mat_data">
<code class="sig-name descname">store_mat_data</code><span class="sig-paren">(</span><em class="sig-param">mats</em>, <em class="sig-param">d_step</em>, <em class="sig-param">moment</em><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation.store_mat_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes HDF5/Pytables database (if not exist) or append burnable
material composition, mass, density, volume, temperature, burnup,
mass_flowrate, void_fraction, at the current depletion step to it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mats</strong> (<em>dict</em>) – <p>Dictionaty that contains <cite>Materialflow</cite> objects.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>Name of burnable material.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p><cite>Materialflow</cite> object holding composition and properties.</p>
</dd>
</dl>
</p></li>
<li><p><strong>d_step</strong> (<em>int</em>) – Current depletion step.</p></li>
<li><p><strong>moment</strong> (<em>int</em>) – Indicates at which moment in the depletion step store the data. <cite>0</cite>
refers the beginning, <cite>1</cite> refers the end of depletion step.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="saltproc.simulation.Simulation.store_run_init_info">
<code class="sig-name descname">store_run_init_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation.store_run_init_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds to database Serpent and Saltproc simulation parameters before
starting depletion sequence.</p>
</dd></dl>

<dl class="method">
<dt id="saltproc.simulation.Simulation.store_run_step_info">
<code class="sig-name descname">store_run_step_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation.store_run_step_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds to database Serpent and Saltproc simulation parameters
(execution time, memory usage), multiplication factor, breeding ratio,
delayed neutron precursor data, fission mass, cumulative depletion
time, power level for the current time step.</p>
</dd></dl>

<dl class="method">
<dt id="saltproc.simulation.Simulation.switch_to_next_geometry">
<code class="sig-name descname">switch_to_next_geometry</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#saltproc.simulation.Simulation.switch_to_next_geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts line with path to next Serpent geometry file at the
beginning of the Serpent iteration input file.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Andrei Rykhlevskii, Jin Whan Bae, Kathryn D. Huff

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>